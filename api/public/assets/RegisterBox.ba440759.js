import{r as t,a as z,q as D,w as O,b as P,o as l,c as n,d as A,e as i,t as v,f as _,g as R,F as $,h as F,i as M,s as T,j as U,k as Z,l as I,u as q}from"./index.194db146.js";import{I as J}from"./InputText.ba541495.js";import{_ as L,a as G}from"./TitleBox.8f9cd135.js";const H={class:"container"},K={class:"form-box"},Q={class:"green"},W={key:0,class:"green text-center"},X={key:1,class:"error text-center"},Y={key:2,class:"green text-center"},ee=["onSubmit"],ae={class:"form-fileds btn-box"},se=["disabled"],te=Z("Already a user? Sign In"),re={__name:"RegisterBox",async setup(oe){var b,x,k,w,y,B;let u,p;const e=t((k=(x=(b=I)==null?void 0:b.config)==null?void 0:x.forms)==null?void 0:k.regsitration),f=t(!0),d=t(!1),N=t((B=(y=(w=I)==null?void 0:w.config)==null?void 0:y.pagetitles)==null?void 0:B.regsitration),S=t(""),m=t(!1),h=z({}),g=t(null),c=t(null),C=t(([u,p]=D(()=>T().getCities()),u=await u,p(),u));O(e.value.formfields,()=>{d.value=!1,f.value=!0;for(const[r,a]of Object.entries(e.value.formfields))e.value.formfields[r].error!=""&&(d.value=!0);d.value||(f.value=!1)});const V=(r,a)=>{const s=/^[a-z0-9_-]{4,8}$/,o=/(?=(.*[0-9]))((?=.*[A-Za-z0-9])(?=.*[A-Z])(?=.*[a-z]))^.{6,}$/;e.value.formfields[a].error="",e.value.formfields[a].name==="fullName"&&r.length<4&&(e.value.formfields[a].error=e.value.formfields[a].label+" must contain more than 4 characters"),e.value.formfields[a].name==="userName"&&(s.exec(r)||(e.value.formfields[a].error=e.value.formfields[a].label+" must contain 4 to 8 alphanumeric letters")),e.value.formfields[a].name==="password"&&(o.exec(r)||(e.value.formfields[a].error=e.value.formfields[a].label+" 1 lowercase letter, 1 uppercase letter, 1 number, and be at least 6 characters long")),e.value.formfields[a].name==="confirmPassword"&&e.value.formfields[a].value!==e.value.formfields.password.value&&(e.value.formfields[a].error=e.value.formfields[a].label+" dose not match"),e.value.formfields[a].name==="cities"&&e.value.formfields[a].value.length!==2&&(e.value.formfields[a].error="Please select 2 "+e.value.formfields[a].label)},j=async()=>{m.value=!0,c.value=null;const r=q();for(const[a,s]of Object.entries(e.value.formfields))Object.assign(h,{[a]:s.value}),e.value.formfields[a].error="";await r.register(h).catch(a=>{a.forEach(s=>{s.param==="defaultErr"?c.value=s.msg:e.value.formfields[s.param].error=s.msg})}),m.value=!1};return(r,a)=>{const s=P("router-link");return l(),n("div",H,[A(G,{header:N.value},null,8,["header"]),i("div",K,[i("h2",Q,v(S.value),1),g.value?(l(),n("p",W,v(g.value),1)):_("",!0),c.value?(l(),n("p",X,v(c.value),1)):_("",!0),m.value?(l(),n("p",Y,"Please wait...")):_("",!0),i("form",{onSubmit:R(j,["prevent"])},[(l(!0),n($,null,F(e.value.formfields,(o,E)=>(l(),U(J,{att:o,options:o!=null&&o.options?C.value:null,key:E,onValidateInput:V},null,8,["att","options"]))),128)),i("div",ae,[i("button",{disabled:f.value===!0}," Sign Up ",8,se)])],40,ee),A(s,{to:"/",class:"nav-item nav-link"},{default:M(()=>[te]),_:1})])])}}};var ue=L(re,[["__scopeId","data-v-19833c2a"]]);export{ue as default};
