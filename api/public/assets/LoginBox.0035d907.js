import{r as s,a as L,w as C,b as D,o as r,c as l,d as V,e as n,t as m,f as v,g as O,F as U,h as A,i as F,j as M,k as T,l as w,u as J}from"./index.a1eef302.js";import{I as P}from"./InputText.6b72f523.js";import{_ as $,a as q}from"./TitleBox.e8558def.js";const z={class:"container"},G={class:"form-box"},H={class:"green"},K={key:0,class:"green text-center"},Q={key:1,class:"error text-center"},R={key:2,class:"green text-center"},W=["onSubmit"],X={class:"form-fileds btn-box"},Y=["disabled"],Z=T("New user? Sign Up"),ee={__name:"LoginBox",setup(ae){var g,h,b,x,k,y;const e=s((b=(h=(g=w)==null?void 0:g.config)==null?void 0:h.forms)==null?void 0:b.login),u=s(!0),c=s(!1),B=s((y=(k=(x=w)==null?void 0:x.config)==null?void 0:k.pagetitles)==null?void 0:y.home),I=s(""),d=s(!1),_=L({}),p=s(null),i=s(null);C(e.value.formfields,()=>{c.value=!1,u.value=!0;for(const[o,a]of Object.entries(e.value.formfields))e.value.formfields[o].error!=""&&(c.value=!0);c.value||(u.value=!1)});const N=(o,a)=>{e.value.formfields[a].error="",e.value.formfields[a].name==="userName"&&o.length<2&&(e.value.formfields[a].error=e.value.formfields[a].label+" must not empty"),e.value.formfields[a].name==="password"&&o.length<2&&(e.value.formfields[a].error=e.value.formfields[a].label+" must not empty")},S=async()=>{d.value=!0,i.value=null;const o=J();for(const[a,t]of Object.entries(e.value.formfields))Object.assign(_,{[a]:t.value}),e.value.formfields[a].error="";await o.login(_).catch(a=>{a.forEach(t=>{t.param==="defaultErr"?i.value=t.msg:e.value.formfields[t.param].error=t.msg})}),d.value=!1};return(o,a)=>{const t=D("router-link");return r(),l("div",z,[V(q,{header:B.value},null,8,["header"]),n("div",G,[n("h2",H,m(I.value),1),p.value?(r(),l("p",K,m(p.value),1)):v("",!0),i.value?(r(),l("p",Q,m(i.value),1)):v("",!0),d.value?(r(),l("p",R,"Please wait...")):v("",!0),n("form",{onSubmit:O(S,["prevent"])},[(r(!0),l(U,null,A(e.value.formfields,(f,j)=>(r(),M(P,{att:f,key:j,modelValue:f.name,"onUpdate:modelValue":E=>f.name=E,onValidateInput:N},null,8,["att","modelValue","onUpdate:modelValue"]))),128)),n("div",X,[n("button",{disabled:u.value===!0}," Sign in ",8,Y)])],40,W),V(t,{to:"/register",class:"nav-item nav-link"},{default:F(()=>[Z]),_:1})])])}}};var re=$(ee,[["__scopeId","data-v-2da02419"]]);export{re as default};
